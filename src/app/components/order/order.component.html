<div class="checkout-layout">

  <!-- Cart Preview -->
  <div *ngIf="cartItems.length > 0" class="cart-preview">
    <button class="back-btn" (click)="goBackToCart()">
  <span class="arrow">←</span> Back to Cart
</button>

    <h3> Preview </h3>
    <ul>
      <li *ngFor="let item of cartItems">
        <img *ngIf="item.image" [src]="getImageSrc(item)">
        <div class="item-info">
          <span class="name">{{ item.name }}</span>
          <span class="price">{{ item.quantity }} × ${{ item.price }}</span>
        </div>
      </li>
    </ul>
    <p class="total">Total: ${{ getTotal() }}</p>
  </div>

  <!-- Order Form -->
  <div class="order-form-container">
    <h2>Place Your Order</h2>

    <form (ngSubmit)="submitOrder()" #orderForm="ngForm">

      <label>Name</label>
      <input type="text" [(ngModel)]="name" name="name" required />

      <label>Email</label>
      <input type="email" [(ngModel)]="email" name="email" required />

      <label>Address</label>
      <textarea [(ngModel)]="address" name="address" required></textarea>

      <label>Phone</label>
      <input type="tel" [(ngModel)]="phone" name="phone" required />

      <label>Payment Method</label>
      <select [(ngModel)]="paymentMethod" name="paymentMethod" required>
        <option value="cash">Cash on Delivery</option>
        <option value="stripe">Credit / Debit Card</option>
      </select>

      <button type="submit" [disabled]="loading || !orderForm.form.valid">
        {{ loading ? 'Processing...' : 'Place Order' }}
      </button>

      <p *ngIf="errorMsg" class="error">{{ errorMsg }}</p>
    </form>
  </div>

</div>
